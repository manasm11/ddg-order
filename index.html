<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="/static/index.css" />
  <title>DDG Order</title>
</head>

<script></script>

<body>
  <form>
    <h1 class="mt-12 font-extrabold text-center text-3xl">Durga Dawa Ghar</h1>
    <h1 class="text-center text-2xl font-mono">Order</h1>
    <div id="party-details" class="m-12">
      <div class="relative mt-4">
        <input type="text" name="name" id="name"
          class="peer h-10 w-full border-b-2 border-gray-300 text-gray-900 focus:outline-none focus:border-pink-600 placeholder-transparent"
          placeholder="." />
        <label for="name"
          class="absolute -top-3.5 left-0 text-gray-600 text-sm peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-400 peer-placeholder-shown:top-2 transition-all peer-focus:-top-3.5 peer-focus:text-gray-600 peer-focus:text-sm">
          Shop Name
        </label>
      </div>
      <div class="relative mt-4">
        <input list="regions" name="region" id="region" placeholder="."
          class="peer h-10 w-full border-b-2 border-gray-300 text-gray-900 focus:outline-none focus:border-pink-600 placeholder-transparent" />
        <label for="region"
          class="absolute -top-3.5 left-0 text-gray-600 text-sm peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-400 peer-placeholder-shown:top-2 transition-all peer-focus:-top-3.5 peer-focus:text-gray-600 peer-focus:text-sm">
          Region
        </label>
      </div>
      <div class="relative mt-4">
        <input type="number" name="contact" id="contact" placeholder="."
          class="peer h-10 w-full border-b-2 border-gray-300 text-gray-900 focus:outline-none focus:border-pink-600 placeholder-transparent" />
        <label for="contact"
          class="absolute -top-3.5 left-0 text-gray-600 text-sm peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-400 peer-placeholder-shown:top-2 transition-all peer-focus:-top-3.5 peer-focus:text-gray-600 peer-focus:text-sm">
          Phone No.
        </label>
      </div>
    </div>

    <h3 class="text-xl ml-4">Add Product</h3>
    <div class="relative m-4">
      <input type="text" name="search" id="search" placeholder="." onfocus="showproducts()" onblur="hideproducts()" oninput="showproducts()"
        class="peer h-10 w-full border-b-2 border-gray-300 text-gray-900 focus:outline-none focus:border-pink-600 placeholder-transparent" />
      <label for="contact"
        class="absolute -top-3.5 left-0 text-gray-600 text-sm peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-400 peer-placeholder-shown:top-2 transition-all peer-focus:-top-3.5 peer-focus:text-gray-600 peer-focus:text-sm">
        Search Product
      </label>
      <div id="products-list"
        class="absolute left-0 w-full z-10 rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none hidden"
        role="menu" aria-orientation="vertical" aria-labelledby="menu-button" tabindex="-1">
      </div>
  </form>

  <datalist id="regions">
    {% for region in regions %}
    <option value="{{ region }}"></option>
    {% endfor %}
  </datalist>
</body>
{% block javascript %}

<script>
  function showproducts() {
    updateproducts()
    document.getElementById("products-list").classList.remove("hidden")
  }
  function hideproducts() {
    document.getElementById("products-list").classList.add("hidden")
  }

  function updateproducts() {
    let plist = document.getElementById("products-list");
    let search_string = document.getElementById("search").value
    let filtered_products = {{ products | tojson }}.filter(function (p) { return p.item.toUpperCase().indexOf(search_string.toUpperCase()) !== -1; });;
    plist.innerHTML = ""
    for (p of filtered_products) {
      let d = document.createElement("div")
      d.classList.add("p-2");
      d.innerText = p.item;
      plist.appendChild(d);
    }
  }
  function filterFunction() {
    var input, filter, ul, li, a, i;
    input = document.getElementById("item-search");
    filter = input.value.toUpperCase();
    div = document.getElementById("myDropdown");
    a = div.getElementsByTagName("a");
    for (i = 0; i < a.length; i++) {
      txtValue = a[i].textContent || a[i].innerText;
      if (txtValue.toUpperCase().indexOf(filter) > -1) {
        a[i].style.display = "";
      } else {
        a[i].style.display = "none";
      }
    }
  }
</script>
{% endblock %}

</html>